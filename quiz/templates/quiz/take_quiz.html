{% extends 'quiz/base.html' %}
{% block title %}Take Quiz{% endblock %}
{% block content %}
<h2 class="mb-4 text-center">{{ quiz.title }}</h2>
<form method="post">
  {% csrf_token %}
  {% for question in questions %}
    <div class="card mb-4 question-card" data-question="{{ forloop.counter }}">
      <div class="card-body">
        <h5 class="card-title">{{ forloop.counter }}. {{ question.question_text }}</h5>
        {% for choice in question.choice_set.all %}
          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{ question.id }}" id="choice{{ choice.id }}" value="{{ choice.id }}">
            <label class="form-check-label" for="choice{{ choice.id }}">
              {{ choice.choice_text }}
            </label>
          </div>
        {% endfor %}
      </div>
    </div>
  {% endfor %}
  <button type="submit" class="btn btn-primary">Submit Quiz</button>
</form>

<!-- <script>
  // Progress bar logic
  const totalQuestions = {{ questions|length }};
  const questionCards = document.querySelectorAll('.question-card');
  const progressBar = document.getElementById('progressBar');

  document.querySelectorAll('.form-check-input').forEach(input => {
    input.addEventListener('change', () => {
      let answered = 0;
      questionCards.forEach(card => {
        const questionId = card.dataset.question;
        if (document.querySelector(`input[name='${questionId}']:checked`)) {
          answered++;
        }
      });
      const percent = (answered / totalQuestions) * 100;
      progressBar.style.width = `${percent}%`;
      progressBar.innerText = `${Math.round(percent)}%`;
    });
  });
</script> -->
{% endblock %}
